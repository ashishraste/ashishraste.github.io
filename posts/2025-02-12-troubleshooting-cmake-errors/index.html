<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Troubleshooting CMake Errors | Ashish Raste</title>
<meta name=keywords content><meta name=description content="Introduction
CMake is the most widely used build system tool in the C++ programming landscape. Troubleshooting its build errors can be frustrating for engineers new to the ecosystem, especially those in robotics using ROS middleware, the most popular framework used by robotics engineers in the field. A common challenge arises when integrating third-party CMake projects, only to encounter cryptic errors that take hours to resolve. This is partly due to CMake’s official documentation, which, while detailed, often lacks clear, practical examples."><meta name=author content><link rel=canonical href=https://ashishraste.github.io/posts/troubleshooting-cmake-errors/><meta name=google-site-verification content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.2a6182ce39a57d949110d5c03e485271c0f316a884156400190a2891eb275b28.css integrity="sha256-KmGCzjmlfZSRENXAPkhSccDzFqiEFWQAGQookesnWyg=" rel="preload stylesheet" as=style><link rel=icon href=https://ashishraste.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://ashishraste.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://ashishraste.github.io/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://ashishraste.github.io/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://ashishraste.github.io/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://ashishraste.github.io/posts/2025-02-12-troubleshooting-cmake-errors/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><style>@media screen and (min-width:769px){.post-content input[type=checkbox]:checked~label>img{transform:scale(1.6);cursor:zoom-out;position:relative;z-index:999}.post-content img.zoomCheck{transition:transform .15s ease;z-index:999;cursor:zoom-in}}</style><script async src="https://www.googletagmanager.com/gtag/js?id=G-YBZSYBWQ4W"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-YBZSYBWQ4W")}</script><meta property="og:url" content="https://ashishraste.github.io/posts/2025-02-12-troubleshooting-cmake-errors/"><meta property="og:site_name" content="Ashish Raste"><meta property="og:title" content="Troubleshooting CMake Errors"><meta property="og:description" content="Introduction CMake is the most widely used build system tool in the C++ programming landscape. Troubleshooting its build errors can be frustrating for engineers new to the ecosystem, especially those in robotics using ROS middleware, the most popular framework used by robotics engineers in the field. A common challenge arises when integrating third-party CMake projects, only to encounter cryptic errors that take hours to resolve. This is partly due to CMake’s official documentation, which, while detailed, often lacks clear, practical examples."><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-02-12T13:53:52+08:00"><meta property="article:modified_time" content="2025-02-12T13:53:52+08:00"><meta property="og:image" content="https://ashishraste.github.io/posts/2025-02-12-troubleshooting-cmake-errors/posts/2025-02-12-troubleshooting-cmake-errors/cover.jpg"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://ashishraste.github.io/posts/2025-02-12-troubleshooting-cmake-errors/posts/2025-02-12-troubleshooting-cmake-errors/cover.jpg"><meta name=twitter:title content="Troubleshooting CMake Errors"><meta name=twitter:description content="Introduction
CMake is the most widely used build system tool in the C++ programming landscape. Troubleshooting its build errors can be frustrating for engineers new to the ecosystem, especially those in robotics using ROS middleware, the most popular framework used by robotics engineers in the field. A common challenge arises when integrating third-party CMake projects, only to encounter cryptic errors that take hours to resolve. This is partly due to CMake’s official documentation, which, while detailed, often lacks clear, practical examples."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://ashishraste.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Troubleshooting CMake Errors","item":"https://ashishraste.github.io/posts/2025-02-12-troubleshooting-cmake-errors/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Troubleshooting CMake Errors","name":"Troubleshooting CMake Errors","description":"Introduction CMake is the most widely used build system tool in the C++ programming landscape. Troubleshooting its build errors can be frustrating for engineers new to the ecosystem, especially those in robotics using ROS middleware, the most popular framework used by robotics engineers in the field. A common challenge arises when integrating third-party CMake projects, only to encounter cryptic errors that take hours to resolve. This is partly due to CMake’s official documentation, which, while detailed, often lacks clear, practical examples.\n","keywords":[],"articleBody":"Introduction CMake is the most widely used build system tool in the C++ programming landscape. Troubleshooting its build errors can be frustrating for engineers new to the ecosystem, especially those in robotics using ROS middleware, the most popular framework used by robotics engineers in the field. A common challenge arises when integrating third-party CMake projects, only to encounter cryptic errors that take hours to resolve. This is partly due to CMake’s official documentation, which, while detailed, often lacks clear, practical examples.\nI’ve been both a victim and a culprit of this problem! In this post, I’ll walk through a structured approach to troubleshooting CMake errors by making the best use of its modern features.\nExample Overview We’ll use a repository that integrates Boston Dynamics Spot API with the MuJoCo physics engine in a ROS 2 environment. The issue? A missing header file (cv_bridge.h).\nNote: This example is chosen solely to illustrate a common CMake build error. The repository only supports ROS 2 Humble version, but we’re attempting to build it in ROS 2 Jazzy version (and beyond), where cv_bridge package was updated, modifying its include directory structure.\nTroubleshooting Steps 1. Think of CMake Like OOP I like to think of targets in modern CMake as similar to classes in an object-oriented programming (OOP) language with properties and access specifiers. A target’s dependencies, such as libraries and header files, function like inherited properties in OOP, affecting how they link to executables. This article explains the concept well. As with any programming language, when build or configuration errors arise, the best first step is usually to add relevant print/debug statements to gain more insight into the issue. In this example, the error message directly points to the problem, i.e., failure in a find_package command.\n2. Understanding find_package The error occurs because CMake can’t locate cv_bridge.h, despite the package being listed as a dependency.\nThe official documentation of find_package mentions that this command searches for package-specific details (libraries, include files, etc.).\nThe typical search modes, as listed in the official documentation, are given below. This is loosely analogous to polymorphism in OOP; the mechanism for finding a package can be seen as a common interface, with the two modes acting as classes with different functionality.\nConfig mode: Uses a package-specific configuration file, providing more flexibility to the target in how the found package’s configuration is used or even modified. Module mode: Searches CMake’s built-in modules and paths in CMAKE_MODULE_PATH. 3. Finding Where CMake Looks for Packages We now know that CMake may find cv_bridge package via either mode. So, we need to determine its source considering both modes of search:\nConfig mode: The _DIR variable in CMakeCache.txt shows where a package was found. Alternatively, print _CONFIG variable after the find_package statement. This is shown in the below steps.\nPatch applied to simulation/mujoco’s CMakeLists.txt to print cv_bridge_CONFIG if it was set. Colcon build command enabling printing of CMake debug statements (applies to a ROS2 workspace only): colcon build --symlink-install --event-handlers console_direct+ --cmake-clean-first --cmake-args \" --log-level=Debug\" Note: In a normal CMake project, the command would be of the form: cmake --build . --log-level=Debug Module mode: Print CMAKE_MODULE_PATH to see where CMake looks. It selects the first matching path.\n4. Resolving the Issue On my system, CMake finds cv_bridgeConfig.cmake at /opt/ros/jazzy/share/cv_bridge/cmake.\nChecking the root installation path (/opt/ros/jazzy) for a relevant include directory (i.e., /opt/ros/jazzy/include/cv_bridge), we see cv_bridge.h was deprecated and replaced with cv_bridge.hpp. Hence, updating the include statement in simulation/mujoco/src/MuJoCoMessageHandler.cpp resolves the issue, allowing the project to build successfully in a ROS 2 Jazzy workspace.\nSummary The key takeaways from this example are:\nUnderstand CMake’s dependency resolution: Treat CMake scripts like an object-oriented programming language. Targets inherit dependencies, and commands like find_package work in different modes, similar to OOP polymorphism, affecting where libraries and include files are sourced from. Diagnose before fixing: Always check where CMake finds packages/modules/libraries. Inspect CMakeCache.txt or CMAKE_MODULE_PATH, and liberally add print statements (message(DEBUG ...)) to fix dependency issues. Extend this principle to other (yes, bigger) build issues. ","wordCount":"666","inLanguage":"en","image":"https://ashishraste.github.io/posts/2025-02-12-troubleshooting-cmake-errors/posts/2025-02-12-troubleshooting-cmake-errors/cover.jpg","datePublished":"2025-02-12T13:53:52+08:00","dateModified":"2025-02-12T13:53:52+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://ashishraste.github.io/posts/2025-02-12-troubleshooting-cmake-errors/"},"publisher":{"@type":"Organization","name":"Ashish Raste","logo":{"@type":"ImageObject","url":"https://ashishraste.github.io/%3Clink%20/%20abs%20url%3E"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://ashishraste.github.io/ accesskey=h title="Home (Alt + H)"><img src=https://ashishraste.github.io/apple-touch-icon.png alt aria-label=logo height=35>Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><button id=menu-trigger aria-haspopup=menu aria-label="Menu Button"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button><ul id=menu><li><a href=https://ashishraste.github.io/about/ title="About me"><span>About me</span></a></li><li><a href=https://ashishraste.github.io/archives/ title=Archive><span>Archive</span></a></li></ul></nav></header><main class="main page"><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://ashishraste.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://ashishraste.github.io/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Troubleshooting CMake Errors</h1><div class=post-meta><span title='2025-02-12 13:53:52 +0800 AWST'>February 12, 2025</span>&nbsp;·&nbsp;4 min</div></header><figure class=entry-cover><img loading=eager src=https://ashishraste.github.io/posts/2025-02-12-troubleshooting-cmake-errors/cover.jpg alt="Troubleshooting robot"><p>Troubleshooting robot</p></figure><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#introduction>Introduction</a></li><li><a href=#example-overview>Example Overview</a></li><li><a href=#troubleshooting-steps>Troubleshooting Steps</a><ul><li><a href=#1-think-of-cmake-like-oop>1. Think of CMake Like OOP</a></li><li><a href=#2-understanding-find_package>2. Understanding <code>find_package</code></a></li><li><a href=#3-finding-where-cmake-looks-for-packages>3. Finding Where CMake Looks for Packages</a></li><li><a href=#4-resolving-the-issue>4. Resolving the Issue</a></li></ul></li><li><a href=#summary>Summary</a></li></ul></nav></div></details></div><div class=post-content><h2 id=introduction>Introduction<a hidden class=anchor aria-hidden=true href=#introduction>#</a></h2><p><a href=https://cmake.org/>CMake</a> is the most widely used build system tool in the C++ programming landscape. Troubleshooting its build errors can be frustrating for engineers new to the ecosystem, especially those in robotics using <a href=https://docs.ros.org/en/jazzy/index.html>ROS</a> middleware, the most popular framework used by robotics engineers in the field. A common challenge arises when integrating third-party CMake projects, only to encounter cryptic errors that take hours to resolve. This is partly due to CMake’s official documentation, which, while detailed, often lacks clear, practical examples.</p><p>I’ve been both a victim and a culprit of this problem! In this post, I’ll walk through a structured approach to troubleshooting CMake errors by making the best use of its modern features.</p><h2 id=example-overview>Example Overview<a hidden class=anchor aria-hidden=true href=#example-overview>#</a></h2><p>We’ll use a <a href=https://github.com/MindSpaceInc/Spot-MuJoCo-ROS2>repository</a> that integrates Boston Dynamics Spot API with the MuJoCo physics engine in a ROS 2 environment. The issue? A missing header file (<code>cv_bridge.h</code>).</p><p><img alt=alt loading=lazy src=/posts/2025-02-12-troubleshooting-cmake-errors/build-error.png></p><p>Note: This example is chosen solely to illustrate a common CMake build error. The repository only supports ROS 2 <em>Humble</em> version, but we&rsquo;re attempting to build it in ROS 2 <em>Jazzy</em> version (and beyond), where <code>cv_bridge</code> package was updated, modifying its include directory structure.</p><h2 id=troubleshooting-steps>Troubleshooting Steps<a hidden class=anchor aria-hidden=true href=#troubleshooting-steps>#</a></h2><h3 id=1-think-of-cmake-like-oop>1. Think of CMake Like OOP<a hidden class=anchor aria-hidden=true href=#1-think-of-cmake-like-oop>#</a></h3><p>I like to think of <a href=https://cmake.org/cmake/help/book/mastering-cmake/chapter/Key%20Concepts.html#targets><em>targets</em></a> in <a href=https://cliutils.gitlab.io/modern-cmake/README.html>modern CMake</a> as similar to classes in an object-oriented programming (OOP) language with properties and access specifiers. A target&rsquo;s dependencies, such as libraries and header files, function like inherited properties in OOP, affecting how they link to executables. <a href=https://leimao.github.io/blog/CMake-Public-Private-Interface/>This article</a> explains the concept well. As with any programming language, when build or configuration errors arise, the best first step is usually to add relevant print/debug statements to gain more insight into the issue. In this example, the error message directly points to the problem, i.e., failure in a <code>find_package</code> command.</p><h3 id=2-understanding-find_package>2. Understanding <code>find_package</code><a hidden class=anchor aria-hidden=true href=#2-understanding-find_package>#</a></h3><p>The error occurs because CMake can’t locate <code>cv_bridge.h</code>, despite the package being listed as a dependency.</p><p>The official documentation of <a href=https://cmake.org/cmake/help/latest/command/find_package.html>find_package</a> mentions that this command searches for package-specific details (libraries, include files, etc.).</p><p>The typical search modes, as listed in the official documentation, are given below. This is loosely analogous to polymorphism in OOP; the mechanism for finding a package can be seen as a common interface, with the two modes acting as classes with different functionality.</p><ul><li><code>Config mode</code>: Uses a package-specific configuration file, providing more flexibility to the target in how the found package&rsquo;s configuration is used or even modified.</li><li><code>Module mode</code>: Searches CMake’s built-in modules and paths in <code>CMAKE_MODULE_PATH</code>.</li></ul><h3 id=3-finding-where-cmake-looks-for-packages>3. Finding Where CMake Looks for Packages<a hidden class=anchor aria-hidden=true href=#3-finding-where-cmake-looks-for-packages>#</a></h3><p>We now know that CMake may find <code>cv_bridge</code> package via either mode. So, we need to determine its source considering both modes of search:</p><ul><li><p><strong>Config mode</strong>: The <code>&lt;PackageName>_DIR</code> variable in CMakeCache.txt shows where a package was found. Alternatively, print <code>&lt;PackageName>_CONFIG</code> variable after the <code>find_package</code> statement. This is shown in the below steps.</p><ul><li>Patch applied to simulation/mujoco&rsquo;s CMakeLists.txt to print <code>cv_bridge_CONFIG</code> if it was set.
<img loading=lazy src=/posts/2025-02-12-troubleshooting-cmake-errors/cmakelists-debug-statement.png></li><li>Colcon build command enabling printing of CMake debug statements (applies to a ROS2 workspace only):<div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>colcon build --symlink-install --event-handlers console_direct+ --cmake-clean-first --cmake-args <span class=s2>&#34; --log-level=Debug&#34;</span>
</span></span></code></pre></div><ul><li>Note: In a normal CMake project, the command would be of the form:<div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>cmake --build . --log-level<span class=o>=</span>Debug
</span></span></code></pre></div></li></ul></li></ul></li><li><p><strong>Module mode</strong>: Print <code>CMAKE_MODULE_PATH</code> to see where CMake looks. It selects the first matching path.</p></li></ul><h3 id=4-resolving-the-issue>4. Resolving the Issue<a hidden class=anchor aria-hidden=true href=#4-resolving-the-issue>#</a></h3><p>On my system, CMake finds cv_bridgeConfig.cmake at <code>/opt/ros/jazzy/share/cv_bridge/cmake</code>.</p><p>Checking the root installation path (<code>/opt/ros/jazzy</code>) for a relevant <em>include</em> directory (i.e., <code>/opt/ros/jazzy/include/cv_bridge</code>), we see <code>cv_bridge.h</code> was deprecated and replaced with <code>cv_bridge.hpp</code>. Hence, updating the include statement in <code>simulation/mujoco/src/MuJoCoMessageHandler.cpp</code> resolves the issue, allowing the project to build successfully in a ROS 2 Jazzy workspace.</p><h2 id=summary>Summary<a hidden class=anchor aria-hidden=true href=#summary>#</a></h2><p>The key takeaways from this example are:</p><ul><li>Understand CMake’s dependency resolution: Treat CMake scripts like an object-oriented programming language. Targets inherit dependencies, and commands like <code>find_package</code> work in different modes, similar to OOP polymorphism, affecting where libraries and include files are sourced from.</li><li>Diagnose before fixing: Always check where CMake finds packages/modules/libraries. Inspect CMakeCache.txt or <code>CMAKE_MODULE_PATH</code>, and liberally add print statements (<code>message(DEBUG ...)</code>) to fix dependency issues. Extend this principle to other (yes, bigger) build issues.</li></ul></div><footer class=post-footer><ul class=post-tags></ul></footer><div id=disqus_thread></div><script>(function(){var e=document,t=e.createElement("script");t.src="https://ashishraste.disqus.com/embed.js",t.setAttribute("data-timestamp",+new Date),(e.head||e.body).appendChild(t)})()</script><noscript>Please enable JavaScript to view the
<a href=https://disqus.com/?ref_noscript rel=nofollow>comments powered by Disqus.</a></noscript></article></main><footer class=footer><span>&copy; 2025 <a href=https://ashishraste.github.io/>Ashish Raste</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let b=document.querySelector("#menu-trigger"),m=document.querySelector(".menu");b.addEventListener("click",function(){m.classList.toggle("hidden")}),document.body.addEventListener("click",function(e){b.contains(e.target)||m.classList.add("hidden")})</script><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>